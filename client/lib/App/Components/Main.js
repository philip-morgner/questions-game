Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _class,_temp,_initialiseProps,_jsxFileName="src/App/Components/Main.js";var _react=require("react");var _react2=_interopRequireDefault(_react);var _reactNative=require("react-native");var _ramda=require("ramda");var _Question=require("./Question");var _Question2=_interopRequireDefault(_Question);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles=_reactNative.StyleSheet.create({page:{display:"flex",flex:4,backgroundColor:"#48BBEC",paddingLeft:16,paddingRight:16}});var randomize=function randomize(count){var randomSeq=[];(0,_ramda.times)(function(n){var shuffle=function shuffle(n){var random=Math.floor(Math.random()*count);if(randomSeq.some(function(r){return r===random;})){return shuffle(n);}randomSeq.push(random);n--;};return shuffle(n);},count);return randomSeq;};var Main=(_temp=_class=function(_React$Component){_inherits(Main,_React$Component);function Main(props){_classCallCheck(this,Main);var _this=_possibleConstructorReturn(this,(Main.__proto__||Object.getPrototypeOf(Main)).call(this,props));_initialiseProps.call(_this);var data=JSON.parse(props.navigation.getParam("data",[]));_this.state={index:0,data:data,randomSeq:randomize(data.length)};return _this;}_createClass(Main,[{key:"render",value:function render(){var navigation=this.props.navigation;var question=this.getQuestion();var answer=this.getAnswer();return _react2.default.createElement(_reactNative.View,{style:styles.page,__source:{fileName:_jsxFileName,lineNumber:101}},_react2.default.createElement(_Question2.default,{question:question,answer:answer,moveBack:this.handleMoveBack,moveForward:this.handleMoveForward,navigation:navigation,__source:{fileName:_jsxFileName,lineNumber:102}}));}}]);return Main;}(_react2.default.Component),_initialiseProps=function _initialiseProps(){var _this2=this;this.handleMoveForward=function(){var navigation=_this2.props.navigation;var _state=_this2.state,index=_state.index,randomSeq=_state.randomSeq;if(index===-1){navigation.navigate("Menu");}else if(index<randomSeq.length-1){_this2.setState({index:index+1});}else{_this2.setState({index:-1});}};this.handleMoveBack=function(){var index=_this2.state.index;if(index>0){_this2.setState({index:index-1});}};this.getQuestion=function(){var _state2=_this2.state,randomSeq=_state2.randomSeq,index=_state2.index,data=_state2.data;if(index!==-1){var pos=randomSeq[index];return data[pos].question;}return"Game Over\nChug your Drink!";};this.getAnswer=function(){var _state3=_this2.state,randomSeq=_state3.randomSeq,index=_state3.index,data=_state3.data;if(index!==-1){var pos=randomSeq[index];return data[pos].answer||"";}return"";};},_temp);exports.default=Main;