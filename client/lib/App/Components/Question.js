Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _jsxFileName="src/App/Components/Question.js";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require("react");var _react2=_interopRequireDefault(_react);var _reactNative=require("react-native");var _expo=require("expo");var _NavButton=require("./NavButton");var _NavButton2=_interopRequireDefault(_NavButton);var _Menu=require("./Menu");var _Menu2=_interopRequireDefault(_Menu);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var styles=function styles(fontLoaded,type){return _reactNative.StyleSheet.create({text:{fontSize:28,fontFamily:fontLoaded?"BalooBhai":null,textAlign:"center"},wrapper:{flex:1,backgroundColor:type==="question"?"lightblue":"#FEF387",borderRadius:15,marginTop:type==="question"?16:8,marginBottom:type==="question"?8:16,padding:8},action:{fontFamily:fontLoaded?"BalooBhai":null,fontSize:24,textAlign:"center",width:100},actionWrapper:{backgroundColor:"green",borderRadius:15},header:{flex:0,flexDirection:"row",justifyContent:"space-between",marginTop:70},body:{flex:5,justifyContent:"center"},footer:{flex:0,alignItems:"center",paddingBottom:40,height:180},start:{backgroundColor:"yellow",borderRadius:15,width:150,marginTop:16},timer:{fontSize:24,fontFamily:fontLoaded?"BalooBhai":null,textAlign:"center",color:"red",height:40},endGame:{fontFamily:fontLoaded?"BalooBhai":null,fontSize:24,textAlign:"center",width:100,color:"darkred"}});};var Question=function(_React$Component){_inherits(Question,_React$Component);function Question(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Question);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Question.__proto__||Object.getPrototypeOf(Question)).call.apply(_ref,[this].concat(args))),_this),_this.state={fontLoaded:false,remaining:5,timeIsUp:false,timerId:undefined},_this.renderActions=function(){var fontLoaded=_this.state.fontLoaded;var _this$props=_this.props,moveBack=_this$props.moveBack,moveForward=_this$props.moveForward,navigation=_this$props.navigation;var endGame=function endGame(){navigation.navigate("Menu");};var actions=[{name:"\u2190",onPress:moveBack},{name:"END",onPress:endGame},{name:"\u2192",onPress:moveForward}];return actions.map(function(_ref2){var name=_ref2.name,onPress=_ref2.onPress;return _react2.default.createElement(_reactNative.View,{key:name,style:styles().actionWrapper,__source:{fileName:_jsxFileName,lineNumber:129}},_react2.default.createElement(_reactNative.Text,{onPress:onPress,style:name==="END"?styles(fontLoaded).endGame:styles(fontLoaded).action,__source:{fileName:_jsxFileName,lineNumber:130}},name));});},_this.renderCard=function(type){var _this$props2=_this.props,answer=_this$props2.answer,question=_this$props2.question,moveForward=_this$props2.moveForward;var _this$state=_this.state,fontLoaded=_this$state.fontLoaded,timeIsUp=_this$state.timeIsUp;return _react2.default.createElement(_reactNative.TouchableWithoutFeedback,{key:type,disabled:!timeIsUp,onPress:moveForward,__source:{fileName:_jsxFileName,lineNumber:147}},_react2.default.createElement(_reactNative.View,{style:styles(fontLoaded,type).wrapper,__source:{fileName:_jsxFileName,lineNumber:151}},_react2.default.createElement(_reactNative.Text,{style:styles(fontLoaded).text,__source:{fileName:_jsxFileName,lineNumber:152}},type==="question"?question:_this.state.timeIsUp?answer:"?")));},_this.renderTimer=function(answer){var _this$state2=_this.state,fontLoaded=_this$state2.fontLoaded,remaining=_this$state2.remaining,timerId=_this$state2.timerId;var end=function end(){var timerId=_this.state.timerId;_this.setState({timeIsUp:true,remaining:0});clearInterval(timerId);};var countDown=function countDown(){_this.setState({remaining:_this.state.remaining-1});if(_this.state.remaining===0){end();}};var start=function start(){var timerId=setInterval(countDown,1000);_this.setState({timerId:timerId});};return _react2.default.createElement(_reactNative.View,{style:styles().footer,__source:{fileName:_jsxFileName,lineNumber:186}},_react2.default.createElement(_reactNative.Text,{style:styles(fontLoaded).timer,__source:{fileName:_jsxFileName,lineNumber:187}},timerId&&"0:"+(remaining<10?"0":"")+remaining),_react2.default.createElement(_reactNative.View,{style:styles().start,__source:{fileName:_jsxFileName,lineNumber:190}},_react2.default.createElement(_reactNative.Text,{style:styles(fontLoaded).text,onPress:timerId?end:start,__source:{fileName:_jsxFileName,lineNumber:191}},timerId?"Answer":"Start")));},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(Question,[{key:"componentWillMount",value:function componentWillMount(){return regeneratorRuntime.async(function componentWillMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_expo.Font.loadAsync({BalooBhai:require("../../../assets/fonts/BalooBhai-Regular.ttf")}));case 2:this.setState({fontLoaded:true});case 3:case"end":return _context.stop();}}},null,this);}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.answer!==prevProps.answer){clearInterval(this.state.timerId);this.setState({timerId:undefined,remaining:5,timeIsUp:false});}}},{key:"render",value:function render(){var _props=this.props,question=_props.question,answer=_props.answer;var timeIsUp=this.state.timeIsUp;return[_react2.default.createElement(_reactNative.View,{key:"header",style:styles().header,__source:{fileName:_jsxFileName,lineNumber:204}},this.renderActions()),_react2.default.createElement(_reactNative.View,{key:"body",style:styles().body,__source:{fileName:_jsxFileName,lineNumber:207}},[this.renderCard("question"),this.renderCard("answer")]),_react2.default.createElement(_reactNative.View,{key:"footer",style:styles().footer,__source:{fileName:_jsxFileName,lineNumber:210}},answer!==""&&this.renderTimer(answer))];}}]);return Question;}(_react2.default.Component);exports.default=Question;